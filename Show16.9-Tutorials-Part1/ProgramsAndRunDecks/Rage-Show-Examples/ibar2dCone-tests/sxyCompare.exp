{    areaplotset(s,0,0,0, 1.0,3.24,0,100,340,1);	x1 = 2.88;	y1 = 2.88;	z1 = 0.0;	x2 = 5.171;	y2 = 5.171;	z2 = 0.0;		di = 2.0;		r  = .5*di;		v1x=x2-x1;	v1y=y2-y1;	v1z=z2-z1;		l1=sqrt(v1x*v1x+v1y*v1y+v1z*v1z);		n1x=v1x/l1;	n1y=v1y/l1;	n1z=v1z/l1;		v2x=1;	v2y=0;	v2z=0;		a=n1x*v2x+n1y*v2y+n1z*v2z;	/* print("a =  %g\n",a); */		v2x = v2x - a*n1x;	v2y = v2y - a*n1y;	v2z = v2z - a*n1z;		l2=sqrt(v2x*v2x+v2y*v2y+v2z*v2z);		n2x=v2x/l2;	n2y=v2y/l2;	n2z=v2z/l2;	a=v1x*v2x+v1y*v2y+v1z*v2z;		l2=sqrt(v2x*v2x+v2y*v2y+v2z*v2z);/*		print("a =  %g\n",a);	print("l2 = %g\n",l2);	print("v1x %g ",v1x);	print("v1y %g ",v1y);	print("v1z %g \n",v1z);	print("v2x %g ",v2x);	print("v2y %g ",v2y);	print("v2z %g \n",v2z);*/	v2x = r*n2x;	v2y = r*n2y;	v2z = r*n2z;	    gplane(d, x1,y1,z1, x1+v2x,y1+v2y,z1+v2z, x2,y2,z2, 100,340);    window("sxy",size(200,340));    window("diff",size(100,340));    pi = 4.0*atan(1.0);    angle=atan2(y2-y1,x2-x1);    angle  = -(0.5*pi-angle);    cosang = cos(angle);    coscos = cosang*cosang;    sinang = sin(angle);    sinsin = sinang*sinang;    sincos = sinang*cosang;	setv=diff;    if(s:density > 1.0){/*		        outs=  s:sxx;        outd=  (d:sxx*coscos+d:syy*sinsin+2.0*d:sxy*sincos);        outs=  s:syy;        outd=  (d:syy*coscos+d:sxx*sinsin-2.0*d:sxy*sincos);        outs=  s:szz;        outd=  d:szz;*/        outs=  s:sxy;        outd=  (d:sxy*(coscos-sinsin)-(d:sxx-d:syy)*sincos);        setv=1;    }else{        outs= 0;        outd= 0;        setv=0;    }   maxf=max(fabs(outd));   diff=100*fabs(outs-outd)/maxf;   den=sum(setv);   print("maximum %.4g ",max(diff));   print("average %.4g ",sum(diff)/den);   print("norm %.4g\n",sum(fabs(outs-outd))/den);   sxy=insert(sxy,xflip(outd),0,0);   sxy=insert(sxy,outs,100,0);   plotsetrange(sxy,"sxy",s,-1,0,0,1,3.4,0);}